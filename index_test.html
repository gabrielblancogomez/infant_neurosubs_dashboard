<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EEG Group Analysis Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/plotly.js/2.16.1/plotly.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>

        <style>        :root {            --primary-color: #184e77;            --secondary-color: #34a0a4;            --accent-color: #52b69a;            --bg-color: #f5f9fc;            --text-color: #333;            --card-bg: white;            --header-text: white;            --border-color: #e0e6ed;                    /* Project Overview Image */        .viz-image {            width: 100%;            max-width: 1200px;            height: auto;            border-radius: 8px;            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);            margin: 20px 0;        }        /* 3D Brain Container */        .brain-3d-container {            width: 100%;            height: 400px;            border-radius: 8px;            overflow: hidden; /* Prevent content from leaking outside */            background: var(--bg-color);            margin: 20px auto;            position: relative;            padding: 0;            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);        }        .brain-3d-container iframe {            width: 100%;            height: 100%;            border: none;            /* No transform or negative margins to allow proper display */        }        /* Key Findings Cards */        .brain-group-card {            background: var(--card-bg);            border-radius: 12px;            padding: 24px;            margin: 20px 0;            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);            transition: transform 0.2s ease;        }

        /* Findings Container */
        .findings-container {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: space-between;
            margin: 20px 0;
        }
        
        /* Override brain-group-card styles when in findings-container */
        .findings-container .brain-group-card {
            padding: 20px;
            margin: 0;
            flex: 1;
            min-width: 250px;
            max-width: calc(33.333% - 10px);
        }
        
        /* Responsive layout for findings cards */
        @media (max-width: 768px) {
            .findings-container {
                flex-direction: column;
            }
            .findings-container .brain-group-card {
                max-width: 100%;
                margin-bottom: 15px;
            }
        }

        .brain-group-card:hover {
            transform: translateY(-2px);
        }

        .group-indicator {
            display: inline-block;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }
        .group-a-indicator { background-color: var(--class-a); }
        .group-b-indicator { background-color: var(--class-b); }
        .group-c-indicator { background-color: var(--class-c); }
        .findings-list {            list-style-type: none;            padding-left: 20px;            margin-top: 15px;        }        .findings-list li {            position: relative;            padding: 8px 0 8px 25px;            line-height: 1.4;        }        .findings-list li:before {            content: "•";            position: absolute;            left: 0;            color: var(--text-color);        }        .key-finding {            background: var(--bg-color);            border-left: 4px solid var(--primary-color);            padding: 20px;            margin: 30px 0;            border-radius: 0 8px 8px 0;        }        .key-finding h4 {            margin: 0 0 10px 0;            color: var(--primary-color);        }        .key-finding p {            margin: 0;            line-height: 1.6;        }
            
            /* Class Colors - same for both LPA and HC */
            --class-a: #184e77;
            --class-b: #1a759f;
            --class-c: #34a0a4;
            
            /* Light versions for badges */
            --class-a-light: rgba(24, 78, 119, 0.15);
            --class-b-light: rgba(26, 117, 159, 0.15);
            --class-c-light: rgba(52, 160, 164, 0.15);
        }

        .dark-mode {
            --primary-color: #1a759f;
            --secondary-color: #34a0a4;
            --accent-color: #76c893;
            --bg-color: #121212;
            --text-color: #e0e0e0;
            --card-bg: #1e1e1e;
            --header-text: #f5f5f5;
            --border-color: #333;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.3s, color 0.3s;
            line-height: 1.6;
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        .sidebar {
            width: 280px;
            background-color: var(--primary-color);
            color: var(--header-text);
            padding: 20px;
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            overflow-y: auto;
            box-shadow: 2px 0 15px rgba(0,0,0,0.15);
            transition: transform 0.3s;
            z-index: 100;
        }

        .sidebar-collapsed {
            transform: translateX(-280px);
        }

        .sidebar-toggle {
            position: fixed;
            top: 20px;
            left: 20px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            padding: 10px 15px;
            cursor: pointer;
            z-index: 101;
            font-size: 1rem;
            display: none;
        }

        .sidebar-toggle.visible {
            display: block;
        }

        .logo {
            text-align: center;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255,255,255,0.2);
            margin-bottom: 30px;
        }

        .logo h2 {
            margin: 0;
            font-size: 1.5rem;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .logo p {
            font-size: 0.85rem;
            margin-top: 5px;
            opacity: 0.8;
        }

        .nav-links {
            list-style: none;
        }

        .nav-section {
            margin-bottom: 15px;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: rgba(255,255,255,0.6);
        }

        .nav-links li {
            margin-bottom: 2px;
        }

        .nav-links a {
            color: var(--header-text);
            text-decoration: none;
            display: block;
            padding: 10px 15px;
            border-radius: 5px;
            transition: all 0.2s;
            font-size: 0.95rem;
        }

        .nav-links a:hover, .nav-links a.active {
            background-color: rgba(255,255,255,0.15);
            transform: translateX(5px);
        }

        .nav-links a.active {
            border-left: 3px solid var(--accent-color);
        }

        .main-content {
            flex: 1;
            padding: 30px;
            margin-left: 280px;
            transition: margin-left 0.3s;
        }

        .main-content.expanded {
            margin-left: 0;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            background-color: var(--primary-color);
            color: var(--header-text);
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .viz-section {
            background: var(--card-bg);
            padding: 25px;
            margin-bottom: 40px;
            border-radius: 10px;
            box-shadow: 0 3px 12px rgba(0,0,0,0.08);
            border: 1px solid var(--border-color);
        }

        h1 {
            margin: 0;
            font-size: 2.2rem;
            font-weight: 700;
        }

        .subtitle {
            margin-top: 10px;
            font-size: 1.1rem;
            opacity: 0.9;
        }

        h2 {
            color: var(--primary-color);
            border-bottom: 2px solid var(--secondary-color);
            padding-bottom: 10px;
            margin-bottom: 25px;
            font-size: 1.6rem;
            font-weight: 600;
            display: flex;
            align-items: center;
        }

        h2 i {
            margin-right: 10px;
        }

        .section-description {
            margin-bottom: 20px;
            font-size: 0.95rem;
            line-height: 1.7;
            color: var(--text-color);
            text-align: left;
        }

        .row {
            display: flex;
            flex-wrap: wrap;
            margin: 0 -15px 20px;
        }

        .col {
            flex: 1;
            padding: 0 15px;
            min-width: 300px;
            margin-bottom: 30px;
        }

        .viz-container {            position: relative;            margin-bottom: 30px;            transition: transform 0.2s;            width: 100%;        }        .viz-container:hover {            transform: translateY(-5px);        }

        .viz-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--primary-color);
        }

        .viz-subtitle {
            font-size: 0.85rem;
            color: #666;
            margin-bottom: 15px;
        }

        .viz-card {            border: 1px solid var(--border-color);            border-radius: 8px;            overflow: hidden;            box-shadow: 0 3px 10px rgba(0,0,0,0.1);            width: 100%;        }

        img.viz-image {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 0 auto;
            transition: transform 0.3s;
            cursor: pointer;
        }
        .viz-card iframe {
        min-height: 600px;
        height: 100%;
        width: 100%;
    }


    /* Two-column layout */
.row {
    display: flex;
    gap: 20px;
    margin: 0 -10px;
}

.col {
    flex: 1;
    padding: 0 10px;
    min-width: 0; /* Prevent overflow */
}

/* EEG Features List */
.eeg-features-list {
    columns: 2;
    column-gap: 30px;
    padding-left: 20px;
}

.eeg-features-list li {
    margin-bottom: 8px;
    break-inside: avoid; /* Prevent item splitting across columns */
    padding-right: 10px;
}

* Two-column layout */
.row {
    display: flex;
    gap: 20px;
    margin: 0 -10px;
}

.col {
    flex: 1;
    padding: 0 10px;
    min-width: 0;
}

/* Table styling (matches your preferred format) */
.demographics-table {
    width: 100%;
    border-collapse: collapse;
    margin: 0;
    font-size: 0.9em;
}

.demographics-table th {
    background-color: var(--primary-color);
    color: white;
    padding: 12px 15px;
    text-align: left;
}

.demographics-table td {
    padding: 10px 15px;
    border-bottom: 1px solid var(--border-color);
}

.demographics-table tr:nth-child(even) {
    background-color: rgba(0,0,0,0.05);
}

.category-row {
    background-color: rgba(25, 113, 194, 0.1);
    font-weight: bold;
}

.category-row td {
    padding-top: 15px;
    border-top: 2px solid var(--border-color);
}

* EEG Composite Figure Styles */
.eeg-composite-figure {
    display: flex;
    flex-direction: column;
    align-items: center;
}

.composite-image {
    max-width: 100%;
    height: auto;
    border: 1px solid #eee;
    border-radius: 4px;
    margin-bottom: 10px;
}

.figure-caption {
    font-size: 0.9em;
    color: #555;
    text-align: center;
    line-height: 1.4;
    padding: 0 10px;
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .row {
        flex-direction: column;
    }
    .col {
        padding: 0;
    }
}
    /* Remove default padding from containers */
    .iframe-container {
        padding: 0 !important;
        height: 100%;
    }


.class-size-container {
    flex: 1;
    min-height: 600px;
}

/* Radar plot section adjustments */
#eeg-profiles {
    margin-top: 40px;
}

/* Ensure iframes maintain aspect ratio */
.viz-card iframe {
    aspect-ratio: 16/9;
}
    /* Make chart containers larger */
    .chart-container {
        height: 700px !important;
        min-height: 700px;
    }
        .viz-card:hover img.viz-image {
            transform: scale(1.02);
        }

        .viz-caption {
            padding: 15px;
            background: rgba(0,0,0,0.02);
            font-size: 0.85rem;
            border-top: 1px solid var(--border-color);
        }

        .tabs {
            display: flex;
            flex-wrap: wrap;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 25px;
        }

        .tab {
            padding: 12px 25px;
            cursor: pointer;
            background: var(--bg-color);
            border: 1px solid var(--border-color);
            border-bottom: none;
            border-radius: 8px 8px 0 0;
            margin-right: 8px;
            margin-bottom: -1px;
            transition: all 0.2s;
            font-weight: 500;
        }

        .tab.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .chart-container {
            position: relative;
            height: 400px;
            margin: 20px 0;
        }

        .key-finding {
            background-color: rgba(82, 182, 154, 0.1);
            border-left: 4px solid var(--accent-color);
            padding: 15px;
            margin: 20px 0;
            border-radius: 0 5px 5px 0;
        }

        .key-finding h4 {
            color: var(--primary-color);
            margin-bottom: 5px;
        }

        .toggle-theme {
            background: transparent;
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            transition: all 0.2s;
        }

        .toggle-theme:hover {
            background: rgba(255,255,255,0.1);
        }

        #lightbox {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        #lightbox-image {
            max-width: 90%;
            max-height: 90%;
        }

        .close-lightbox {
            position: absolute;
            top: 20px;
            right: 20px;
            color: white;
            font-size: 30px;
            cursor: pointer;
        }

        .panel-label {
            position: absolute;
            font-size: 24px;
            font-weight: bold;
            margin: 10px;
            color: var(--primary-color);
            background: rgba(255,255,255,0.7);
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            z-index: 10;
        }

        .panel-container {
            position: relative;
        }

        @media screen and (max-width: 1024px) {
            .sidebar {
                transform: translateX(-280px);
            }
            
            .sidebar-toggle {
                display: block;
            }
            
            .main-content {
                margin-left: 0;
            }
        }

        .toggle-theme {
            background: transparent;
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            transition: all 0.2s;
            font-size: 0.9rem;
        }

        .toggle-theme:hover {
            background: rgba(255,255,255,0.1);
        }

        #lightbox {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s;
        }

        #lightbox.active {
            opacity: 1;
        }

        #lightbox-image {
            max-width: 90%;
            max-height: 90%;
            box-shadow: 0 0 30px rgba(0,0,0,0.5);
            transform: scale(0.9);
            transition: transform 0.3s;
        }

        #lightbox.active #lightbox-image {
            transform: scale(1);
        }

        .close-lightbox {
            position: absolute;
            top: 20px;
            right: 20px;
            color: white;
            font-size: 30px;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0,0,0,0.5);
            border-radius: 50%;
            transition: background 0.2s;
        }

        .close-lightbox:hover {
            background: rgba(255,255,255,0.2);
        }

        .panel-label {
            position: absolute;
            font-size: 24px;
            font-weight: bold;
            margin: 10px;
            color: var(--primary-color);
            background: rgba(255,255,255,0.8);
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            z-index: 10;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .panel-container {
            position: relative;
        }

        /* EEG Features List */
        .eeg-features-list {
            columns: 2;
            column-gap: 30px;
            padding-left: 20px;
        }

        .eeg-features-list li {
            margin-bottom: 8px;
            break-inside: avoid; /* Prevent item splitting across columns */
            padding-right: 10px;
        }

        /* Table styling */
        .demographics-table {
            width: 100%;
            border-collapse: collapse;
            margin: 0;
            font-size: 0.9em;
        }

        .demographics-table th {
            background-color: var(--primary-color);
            color: white;
            padding: 12px 15px;
            text-align: left;
        }

        .demographics-table td {
            padding: 10px 15px;
            border-bottom: 1px solid var(--border-color);
        }

        .demographics-table tr:nth-child(even) {
            background-color: rgba(0,0,0,0.03);
        }

        .category-row {
            background-color: rgba(25, 113, 194, 0.1);
            font-weight: bold;
        }

        .category-row td {
            padding-top: 15px;
            border-top: 2px solid var(--border-color);
        }

        /* EEG Composite Figure Styles */
        .eeg-composite-figure {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .composite-image {
            max-width: 100%;
            height: auto;
            border: 1px solid #eee;
            border-radius: 4px;
            margin-bottom: 10px;
        }

        .figure-caption {
            font-size: 0.9em;
            color: #555;
            text-align: center;
            line-height: 1.4;
            padding: 0 10px;
        }

        .method-comparison {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
            padding: 20px;
            background: rgba(0,0,0,0.02);
            border-radius: 10px;
        }

        .method-card {
            flex: 1;
            text-align: center;
            padding: 20px;
            border-radius: 10px;
            background: white;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .method-title {
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .method-description {
            font-size: 0.9em;
            margin-bottom: 15px;
        }

        /* Footer styling */
        footer {
            background-color: var(--primary-color);
            color: white;
            text-align: center;
            padding: 30px;
            margin-top: 50px;
            border-radius: 10px;
        }

        .footer-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .footer-content p {
            margin: 10px 0;
        }

        .copyright {
            font-size: 0.85em;
            margin-top: 20px;
            opacity: 0.8;
        }

        /* For larger view in mobile */
        .chart-container {
            height: 700px !important;
            min-height: 700px;
        }

        /* Make iframes work better */
        .iframe-container {
            padding: 0 !important;
            height: 100%;
        }

        /* Progress tracker component */
        .progress-tracker {
            display: flex;
            justify-content: space-between;
            margin: 40px 0;
            position: relative;
        }

        .progress-tracker::before {
            content: '';
            position: absolute;
            top: 15px;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--border-color);
            z-index: 1;
        }

        .progress-step {
            position: relative;
            z-index: 2;
            text-align: center;
            flex: 1;
        }

        .step-icon {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
            font-weight: bold;
        }

        .step-label {
            font-size: 0.85rem;
            font-weight: 500;
        }

        /* Class badges */
        .class-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 6px 12px;
            border-radius: 50px;
            font-weight: bold;
            font-size: 0.9rem;
            margin-right: 5px;
        }

        .class-a-badge {
            background-color: var(--class-a-light);
            color: var(--class-a);
        }

        .class-b-badge {
            background-color: var(--class-b-light);
            color: var(--class-b);
        }

        .class-c-badge {
            background-color: var(--class-c-light);
            color: var(--class-c);
        }

        /* Feature block */
        .feature-block {
            background: linear-gradient(to right, var(--bg-color), transparent);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 3px solid var(--secondary-color);
            transition: all 0.3s;
        }

        .feature-block:hover {
            transform: translateX(5px);
            border-left-width: 5px;
        }

        .feature-block-title {
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 5px;
        }

        /* New accordion for EEG features */
        .accordion {
            margin-bottom: 20px;
        }

        .accordion-item {
            border: 1px solid var(--border-color);
            margin-bottom: 10px;
            border-radius: 8px;
            overflow: hidden;
        }

        .accordion-header {
            padding: 15px;
            background: rgba(0,0,0,0.02);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
            transition: background 0.2s;
        }

        .accordion-header:hover {
            background: rgba(0,0,0,0.05);
        }

        .accordion-content {
            padding: 0;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }

        .accordion-content-inner {
            padding: 15px;
        }

        .accordion-active .accordion-content {
            max-height: 500px;
        }

        /* Responsive adjustments */
        @media screen and (max-width: 1024px) {
            .sidebar {
                transform: translateX(-280px);
            }
            
            .sidebar-toggle {
                display: block;
            }
            
            .main-content {
                margin-left: 0;
            }

            .row {
                flex-direction: column;
            }
            
            .col {
                min-width: 100%;
            }
            
            .method-comparison {
                flex-direction: column;
            }
            
            .tabs {
                overflow-x: auto;
                white-space: nowrap;
                flex-wrap: nowrap;
                padding-bottom: 10px;
            }
            
            .tab {
                flex: 0 0 auto;
            }
        }

        /* Accessibility improvements */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }

        /* Skip to main content link for keyboard users */
        .skip-link {
            background: var(--primary-color);
            color: white;
            font-weight: bold;
            left: 50%;
            padding: 10px;
            position: absolute;
            transform: translateY(-100%);
            transition: transform 0.3s;
            z-index: 100;
        }

        .skip-link:focus {
            transform: translateY(0%);
        }

        /* NEW STYLES FOR DETAILED FINDINGS SECTION */
        .brain-group-card {
            background-color: var(--card-bg);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.08);
            border-left: 5px solid;
        }

        .brain-group-a {
            border-left-color: var(--class-a);
        }

        .brain-group-b {
            border-left-color: var(--class-b);
        }

        .brain-group-c {
            border-left-color: var(--class-c);
        }

        .brain-group-card h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .brain-group-card h3 .group-indicator {
            display: inline-block;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            margin-right: 10px;
            font-weight: bold;
            color: white;
            text-align: center;
            line-height: 24px;
        }

        .group-a-indicator {
            background-color: var(--class-a);
        }

        .group-b-indicator {
            background-color: var(--class-b);
        }

        .group-c-indicator {
            background-color: var(--class-c);
        }

        .findings-list {
            list-style-type: none;
            padding-left: 0;
        }

        .findings-list li {
            position: relative;
            padding-left: 25px;
            margin-bottom: 10px;
            line-height: 1.5;
        }

        .findings-list li:before {
            content: '•';
            position: absolute;
            left: 5px;
            color: var(--secondary-color);
            font-size: 1.2em;
        }

        /* 3D Brain container */
        .brain-3d-container {
            width: 100%;
            height: 400px;
            border-radius: 8px;
            overflow: hidden; /* Prevent content from leaking outside */
            background: var(--bg-color);
            margin: 20px auto;
            position: relative;
            padding: 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .brain-3d-container iframe {
            width: 100%;
            height: 100%;
            border: none;
            /* No transform or negative margins to allow proper display */
        }

        .methodology-figure {
            max-width: 100%;
            margin: 30px 0;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .step-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin: 30px 0;
        }

        .methodology-step {
            flex: 1;
            min-width: 280px;
            background-color: var(--card-bg);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.08);
        }

        /* Existing styles */
        
        /* Project Overview Image */
        .viz-image {
            width: 100%;
            max-width: 1200px;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            margin: 20px 0;
        }

                /* This 3D Brain Container style is already defined above */

        /* Key Findings Cards */
        .brain-group-card {
            background: #ffffff;
            border-radius: 12px;
            padding: 24px;
            margin: 20px 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            transition: transform 0.2s ease;
        }

        .brain-group-card:hover {
            transform: translateY(-2px);
        }

        .group-indicator {
            display: inline-block;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            margin-right: 10px;
            font-weight: bold;
            color: white;
        }

        .group-a-indicator { background-color: #2196F3; }
        .group-b-indicator { background-color: #FF9800; }
        .group-c-indicator { background-color: #4CAF50; }

        .findings-list {
            list-style-type: none;
            padding-left: 20px;
            margin-top: 15px;
        }

        .findings-list li {
            position: relative;
            padding: 8px 0 8px 25px;
            line-height: 1.4;
        }

        .findings-list li:before {
            content: "•";
            position: absolute;
            left: 0;
            color: #666;
        }

        .key-finding {
            background: #f8f9fa;
            border-left: 4px solid #2196F3;
            padding: 20px;
            margin: 30px 0;
            border-radius: 0 8px 8px 0;
        }

        .key-finding h4 {
            margin: 0 0 10px 0;
            color: #1976D2;
        }

        .key-finding p {
            margin: 0;
            line-height: 1.6;
        }

        /* Dark mode adjustments */
        .dark-mode .brain-group-card {
            background: #2d2d2d;
        }

        .dark-mode .key-finding {
            background: #1e1e1e;
        }

        .dark-mode .brain-3d-container {
            background: #1e1e1e;
        }

        /* Brain models container */
        .brain-models-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
            margin: 40px auto;
            max-width: 1400px; /* Keep this wider layout */
            padding: 0 20px;
        }
        
        .brain-model-card {            
            margin-bottom: 40px;            
            padding: 15px;            
            background: var(--card-bg);            
            border-radius: 10px;            
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);            
            transition: transform 0.2s ease;
            height: 100%; /* Ensure card takes full height */
            display: flex;
            flex-direction: column;
        }        
        
        .brain-model-card:hover {            
            transform: translateY(-5px);        
        }        
        
        .brain-model-card .viz-card {            
            border: none;            
            box-shadow: none;
            flex: 1; /* Let card expand to fill available space */
            display: flex;
            flex-direction: column;
        }        
        
        .brain-model-card .viz-title {            
            font-size: 1.2rem;            
            text-align: center;            
            margin-bottom: 20px;            
            color: var(--primary-color);            
            font-weight: 600;        
        }
        
        /* Responsive adjustments for brain models */
        @media (max-width: 1024px) {
            .brain-models-container {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            .brain-models-container {
                grid-template-columns: 1fr;
            }
        }

        .dark-mode .brain-3d-container {
            background: #1e1e1e;
        }

        /* Insights container */
        .insights-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .insight-item {
            background: var(--card-bg);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
            border-left: 4px solid var(--accent-color);
        }
        
        .insight-item h3 {
            color: var(--primary-color);
            margin-bottom: 12px;
            font-size: 1.1rem;
        }
        
                /* Executive Summary Section */        .executive-summary-grid {            display: grid;            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));            gap: 25px;            margin: 30px 0;        }                .summary-card {            background: var(--card-bg);            border-radius: 12px;            padding: 25px;            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);            text-align: center;            transition: transform 0.3s, box-shadow 0.3s;            border-top: 4px solid var(--accent-color);        }                .summary-card:hover {            transform: translateY(-10px);            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.1);        }                .summary-icon {            font-size: 3rem;            margin-bottom: 15px;            color: var(--primary-color);        }                .summary-card h3 {            color: var(--primary-color);            margin-bottom: 15px;            font-size: 1.3rem;        }                .summary-card p {            line-height: 1.5;            font-size: 1rem;        }                /* Complexity Toggle */        .complexity-toggle {            display: flex;            align-items: center;            justify-content: center;            margin: 30px 0;            gap: 15px;        }                .complexity-toggle span {            font-weight: 600;            color: var(--primary-color);        }                .complexity-btn {            padding: 8px 16px;            background: var(--card-bg);            border: 1px solid var(--border-color);            border-radius: 20px;            cursor: pointer;            transition: all 0.2s;            font-size: 0.9rem;            color: var(--text-color);        }                .complexity-btn:hover {            background: var(--primary-color);            color: white;        }                .complexity-btn.active {            background: var(--primary-color);            color: white;            border-color: var(--primary-color);        }                /* Brain-Behavior Relationships */        .brain-behavior-grid {            display: grid;            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));            gap: 25px;            margin-top: 30px;        }
        
        .brain-behavior-item {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            text-align: center;
            transition: transform 0.2s ease-in-out;
        }
        
        .brain-behavior-item:hover {
            transform: translateY(-5px);
        }
        
        .behavior-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }
        
        .brain-behavior-item h3 {
            color: var(--primary-color);
            margin-bottom: 12px;
        }
        
        .brain-behavior-item p {
            text-align: left;
            line-height: 1.6;
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .insights-container,
            .brain-behavior-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Overview Methods Grid */
        .overview-methods-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }
        
        .overview-method-item {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            text-align: center;
            transition: transform 0.2s ease-in-out;
            border-top: 4px solid var(--primary-color);
        }
        
        .overview-method-item:hover {
            transform: translateY(-5px);
        }
        
        .method-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            color: var(--primary-color);
        }
        
        .overview-method-item h3 {
            color: var(--primary-color);
            margin-bottom: 12px;
        }
        
        .overview-method-item p {
            text-align: left;
            line-height: 1.6;
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .overview-methods-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Context Boxes Grid */
        .context-boxes-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 25px;
            margin: 30px 0;
        }
        
        .context-box-item {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            border-left: 4px solid var(--secondary-color);
            text-align: center;
        }
        
        .context-box-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
        }
        
        .context-icon {
            font-size: 2.5rem;
            margin: 0 auto 15px;
            color: var(--secondary-color);
            display: inline-block;
        }
        
        .context-box-item h3 {
            color: var(--primary-color);
            margin-bottom: 12px;
            font-size: 1.2rem;
        }
        
        .context-box-item p {
            text-align: center;
            line-height: 1.6;
            font-size: 0.95rem;
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .context-boxes-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Research Question Box */
        .research-question-box {
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            padding: 25px 30px;
            border-radius: 12px;
            color: white;
            margin: 30px 0;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .research-question-box h3 {
            color: white;
            margin-bottom: 15px;
            font-size: 1.3rem;
            border-bottom: 2px solid rgba(255, 255, 255, 0.3);
            padding-bottom: 10px;
        }

        .research-question-box ol {
            margin-left: 20px;
            font-size: 1.05rem;
        }

        .research-question-box li {
            margin-bottom: 12px;
            line-height: 1.5;
        }

        /* Study Flow */
        .study-flow {
            margin: 40px 0;
        }

        .study-flow h3 {
            color: var(--primary-color);
            margin-bottom: 25px;
            font-size: 1.3rem;
            text-align: center;
        }

        .flow-steps {
            display: flex;
            justify-content: space-between;
            position: relative;
            margin: 0 20px;
        }

        .flow-steps::before {
            content: '';
            position: absolute;
            top: 40px;
            left: 35px;
            right: 35px;
            height: 4px;
            background: var(--secondary-color);
            z-index: 1;
        }

        .flow-step {
            position: relative;
            z-index: 2;
            flex: 1;
            text-align: center;
            max-width: 200px;
        }

        .step-number {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            font-weight: bold;
            font-size: 2rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            position: relative;
        }

        .step-content {
            background: var(--card-bg);
            padding: 20px 15px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            min-height: 120px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .step-content h4 {
            color: var(--primary-color);
            margin-bottom: 8px;
            font-size: 1.1rem;
        }

        .step-content p {
            font-size: 0.9rem;
            line-height: 1.4;
        }

        @media (max-width: 768px) {
            .flow-steps {
                flex-direction: column;
                align-items: center;
                gap: 30px;
            }
            
            .flow-steps::before {
                top: 0;
                bottom: 0;
                left: 40px;
                right: auto;
                width: 4px;
                height: auto;
            }
            
            .flow-step {
                display: flex;
                align-items: center;
                text-align: left;
                max-width: 100%;
                width: 100%;
            }
            
            .step-number {
                margin: 0 20px 0 0;
                width: 60px;
                height: 60px;
                font-size: 1.5rem;
                flex-shrink: 0;
            }
            
            .step-content {
                flex: 1;
                min-height: auto;
            }
        }

        /* Intro paragraph */
        .intro-paragraph {            font-size: 1.1rem;            line-height: 1.7;            color: var(--text-color);            width: 100%;            margin: 0;            text-align: left;        }

        /* Dark mode adjustments */
        .dark-mode .key-finding {
            background: #1e1e1e;
        }

        .dark-mode .brain-3d-container {
            background: #1e1e1e;
        }
        
        .dark-mode .research-question-box {
            background: linear-gradient(to right, #1a3a55, #257077);
        }
        
        .dark-mode .step-content {
            background: #1e1e1e;
        }

        /* Sidebar dropdown styles */
        .dropdown-toggle {
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: var(--header-text);
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
            background-color: rgba(255,255,255,0.05);
            margin-bottom: 2px;
        }

        .dropdown-toggle:hover {
            background-color: rgba(255,255,255,0.15);
            transform: translateX(5px);
        }

        .dropdown-toggle.active {
            background-color: rgba(255,255,255,0.15);
            border-left: 3px solid var(--accent-color);
        }

        .dropdown-icon {
            font-size: 0.7rem;
            transition: transform 0.2s;
        }

        .dropdown-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            padding-left: 15px;
        }

        .dropdown-content.active {
            max-height: 500px;
        }

        /* Tooltip styling for technical terms */
        .tooltip-term {
            position: relative;
            display: inline-block;
            background-color: var(--primary-color);
            color: white;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            text-align: center;
            line-height: 18px;
            font-size: 12px;
            cursor: help;
            margin-left: 5px;
            vertical-align: super;
            font-weight: bold;
        }

        .tooltip-term::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            text-align: center;
            padding: 10px 15px;
            border-radius: 6px;
            width: 250px;
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
            font-weight: normal;
            font-size: 14px;
            z-index: 100;
            line-height: 1.4;
        }

        .tooltip-term:hover::after {
            opacity: 1;
        }

        /* Brain models container */

        /* Group comparison controls */
        .group-comparison-controls {
            background: var(--bg-color);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .group-comparison-controls h3 {
            margin-bottom: 15px;
            color: var(--primary-color);
            font-size: 1.1rem;
        }

        .comparison-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .compare-groups-btn {
            padding: 8px 15px;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s;
            color: var(--text-color);
        }

        .compare-groups-btn:hover {
            background: var(--primary-color);
            color: white;
            transform: translateY(-2px);
        }

        .compare-groups-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        /* Responsive design for comparison buttons */
        @media (max-width: 768px) {
            .comparison-buttons {
                flex-direction: column;
                align-items: stretch;
            }
            .compare-groups-btn {
                text-align: center;
            }
        }

        /* Brain models container */
    </style>
</head>
<body>
    <!-- Accessibility skip link -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <div class="container">
        <aside class="sidebar" id="sidebar">
            <div class="logo">
                <h2>EEG Analysis</h2>
                <p>Infant Brain Subtypes</p>
            </div>
            
            <!-- Study Overview Section -->
            <div class="dropdown-toggle">
                <span>Study Introduction</span>
                <span class="dropdown-icon">►</span>
            </div>
            <div class="dropdown-content">
                <ul class="nav-links">
                    <li><a href="#overview" class="active">Study Summary</a></li>
                    <li><a href="#study-overview">Study Overview</a></li>
                </ul>
            </div>
            
            <!-- Study Details Section -->
            <div class="dropdown-toggle">
                <span>Study Details</span>
                <span class="dropdown-icon">►</span>
            </div>
            <div class="dropdown-content">
                <ul class="nav-links">
                    <li><a href="#study-demographics">Demographics</a></li>
                    <li><a href="#methodology">Methodology</a></li>
                </ul>
            </div>
            
            <!-- Results Section -->
            <div class="dropdown-toggle">
                <span>Key Results</span>
                <span class="dropdown-icon">►</span>
            </div>
            <div class="dropdown-content">
                <ul class="nav-links">
                    <li><a href="#key-findings">Key Findings</a></li>
                    <li><a href="#brain-regions">Brain Regions</a></li>
                    <li><a href="#classes">Group Identification</a></li>
                </ul>
            </div>
            
            <!-- Data Analysis Section -->
            <div class="dropdown-toggle">
                <span>Data Analysis</span>
                <span class="dropdown-icon">►</span>
            </div>
            <div class="dropdown-content">
                <ul class="nav-links">
                    <li><a href="#distributions">Feature Distributions</a></li>
                    <li><a href="#eeg-profiles">Group Profiles</a></li>
                    <li><a href="#eeg-umap">UMAP Projections</a></li>
                </ul>
            </div>
            
            <!-- Language Trajectories Section -->
            <div class="dropdown-toggle">
                <span>Language Development</span>
                <span class="dropdown-icon">►</span>
            </div>
            <div class="dropdown-content">
                <ul class="nav-links">
                    <li><a href="#language-trajectories">Language Trajectories</a></li>
                    <li><a href="#lang-36months">36 Month Analysis</a></li>
                </ul>
            </div>
            
            <!-- Conclusions Section -->
            <div class="dropdown-toggle">
                <span>Conclusions</span>
                <span class="dropdown-icon">►</span>
            </div>
            <div class="dropdown-content">
                <ul class="nav-links">
                    <li><a href="#important-insights">Important Insights</a></li>
                    <li><a href="#brain-behavior">Brain-Behavior Relations</a></li>
                </ul>
            </div>
            
            <button class="toggle-theme" id="toggleTheme" aria-label="Toggle dark mode">🌓 Toggle Dark Mode</button>
        </aside>
        
        <button id="sidebarToggle" class="sidebar-toggle" aria-expanded="false" aria-controls="sidebar">☰ Menu</button>
        
        <main class="main-content" id="main-content">
            <section class="header" id="overview">
                <h1>EEG Group Analysis Dashboard</h1>
                <div class="subtitle">Latent Profile Analysis & Hierarchical Clustering of EEG Data (n=144)</div>
            </section>

            <!-- Executive Summary Cards -->
            <section class="viz-section" id="executive-summary">
                <h2>Summary</h2>
                <div class="section-description">
                    Key takeaways from our research on infant brain patterns and language development.
                </div>
                
                <div class="executive-summary-grid">
                    <div class="summary-card">
                        <div class="summary-icon">🧠</div>
                        <h3>Three Brain Pattern Groups</h3>
                        <p class="general-content">We found three patterns of brain activity in 6-month-old babies using brain recordings.</p>
                        <p class="technical-content" style="display: none;">Latent Profile Analysis and Hierarchical Clustering (n=144) revealed three distinct neurophysiological subtypes with significant differences in gamma power lateralization and interregional connectivity patterns (p<0.001).</p>
                    </div>
                    
                    <div class="summary-card">
                        <div class="summary-icon">📈</div>
                        <h3>Predictive of Language</h3>
                        <p class="general-content">These early brain patterns predict language skills through age 3.</p>
                        <p class="technical-content" style="display: none;">Linear mixed-effects modeling demonstrated significant group×time interactions (F(2,284)=7.46, p<0.01) for language development between 6-36 months, with Group A showing steeper developmental slopes in expressive language (β=0.82, SE=0.09) compared to Groups B and C>
                    </div>
                    
                    <div class="summary-card">
                        <div class="summary-icon">👂</div>
                        <h3>Left-Side Advantage</h3>
                        <p class="general-content">Infants with stronger left-hemisphere activity showed better language outcomes.</p>
                        <p class="technical-content" style="display: none;">Left-lateralized neural activity and enhanced left fronto-temporal connectivity was significantly associated with superior language outcomes in multivariate regression models (R²=0.64, p<0.001), supporting the developmental importance of early hemispheric specialization>
                    </div>
                    
                    <div class="summary-card">
                        <div class="summary-icon">🔍</div>
                        <h3>Early Identification</h3>
                        <p class="general-content">This approach could help identify infants who might benefit from early language interventions.</p>
                        <p class="technical-content" style="display: none;">We did no find an ASD specific phenotype, contributing to a large bodying of research suggesting early heterogeneity/p>
                    </div>
                </div>
                
                <div class="complexity-toggle">
                    <span>Audience Level:</span>
                    <button class="complexity-btn active" data-level="general">General</button>
                    <button class="complexity-btn" data-level="researcher">Researcher</button>
                </div>
            </section>

            <!-- Study Overview Section - Merged version of the two existing overviews -->
            <section class="viz-section" id="study-overview">
                <h2>Understanding Infant Brain Development</h2>
                                <div class="section-description" style="text-align: left; width: 100%;">                    <p class="intro-paragraph" style="width: 100%;">We studied 144 infants to identify brain activity patterns that might predict language development. By mapping these patterns early, we can better understand how the infant brain processes language and potentially identify children who may benefit from early interventions.</p>                </div>
                
                <div class="research-question-box">
                    <h3>Key Research Questions</h3>
                    <ol>
                        <li>Can we identify distinct brain activity patterns in 6-month-old infants?</li>
                        <li>Do these patterns predict language development outcomes?</li>
                        <li>How do these patterns relate to autism spectrum characteristics?</li>
                    </ol>
                </div>
                
                <div class="study-flow">
                    <h3>Research Approach</h3>
                    <div class="flow-steps">
                        <div class="flow-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <h4>Data Collection</h4>
                                <p>EEG recordings from 144 infants (6-7 months)</p>
                            </div>
                        </div>
                        <div class="flow-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <h4>Brain Pattern Analysis</h4>
                                <p>Identifying neural signatures using advanced algorithms</p>
                            </div>
                        </div>
                        <div class="flow-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <h4>Group Classification</h4>
                                <p>Sorting infants into three distinct brain pattern groups</p>
                            </div>
                        </div>
                        <div class="flow-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <h4>Language Assessment</h4>
                                <p>Following development from 6 to 36 months</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="context-boxes-grid">
                    <div class="context-box-item">
                        <div class="context-icon">🔊</div>
                        <h3>Language Development</h3>
                        <p>Language is one of our most important human abilities. For children with autism, speech and language difficulties are often noticed early by parents. The more severe these communication challenges are, the earlier a child typically receives an autism diagnosis.</p>
                    </div>
                    
                    <div class="context-box-item">
                        <div class="context-icon">🧠</div>
                        <h3>Brain Differences</h3>
                        <p>We still don't fully understand why language delays happen in the brain. This is because autism presents differently in each child, with varying patterns in learning ability, language skills, and sensory responses making it challenging to study.</p>
                    </div>
                    
                    <div class="context-box-item">
                        <div class="context-icon">📊</div>
                        <h3>Our New Approach</h3>
                        <p>Instead of comparing children with and without autism, we look at brain patterns to identify natural groupings. This "brain subtyping" approach has proven effective at uncovering meaningful differences that can help guide personalized interventions.</p>
                    </div>
                    
                    <div class="context-box-item">
                        <div class="context-icon">📈</div>
                        <h3>EEG Brain Waves</h3>
                        <p>We use EEG to safely measure brain activity in infants. By analyzing different types of brain waves and connections between brain regions, we can identify patterns that may predict which children will need extra support with language development.</p>
                    </div>
                </div>

                <div class="key-finding">
                    <h4>Research Impact</h4>
                    <p>Early brain measures can predict language development trajectories, contributing to evidence that brain-based stratification approaches can help decode developmental heterogeneity and guide personalized early interventions.</p>
                </div>
            </section>

                        <!-- Progress tracker removed as it was redundant -->
            
            <!-- Study Demographics Section -->
            <section class="viz-section" id="study-demographics">
                <h2>Who We Studied</h2>
                <div class="section-description">
                    Participant characteristics and measured EEG biomarkers (n=144).
                </div>
            
                <div class="row">
                    <!-- Left Column - Demographics Table -->
                    <div class="col">
                        <div class="viz-container">
                            <div class="viz-title">Participant Demographics</div>
                            <div class="viz-card">
                                <table class="demographics-table">
                                    <thead>
                                        <tr>
                                            <th>Characteristic</th>
                                            <th>n</th>
                                            <th>%</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Diagnostic Status -->
                                        <tr class="category-row">
                                            <td colspan="3">Diagnostic Status</td>
                                        </tr>
                                        <tr>
                                            <td>ASD</td>
                                            <td>22</td>
                                            <td>15.0</td>
                                        </tr>
                                        <tr>
                                            <td>No ASD</td>
                                            <td>114</td>
                                            <td>79.0</td>
                                        </tr>
                                        
                                        <!-- ASD Likelihood -->
                                        <tr class="category-row">
                                            <td colspan="3">ASD Likelihood</td>
                                        </tr>
                                        <tr>
                                            <td>Typical</td>
                                            <td>75</td>
                                            <td>52.1</td>
                                        </tr>
                                        <tr>
                                            <td>Elevated</td>
                                            <td>69</td>
                                            <td>47.9</td>
                                        </tr>
                                        
                                        <!-- Site -->
                                        <tr class="category-row">
                                            <td colspan="3">Site</td>
                                        </tr>
                                        <tr>
                                            <td>London</td>
                                            <td>67</td>
                                            <td>46.3</td>
                                        </tr>
                                        <tr>
                                            <td>Washington</td>
                                            <td>77</td>
                                            <td>53.5</td>
                                        </tr>
                                        
                                        <!-- Sex -->
                                        <tr class="category-row">
                                            <td colspan="3">Sex</td>
                                        </tr>
                                        <tr>
                                            <td>Male</td>
                                            <td>76</td>
                                            <td>52.8</td>
                                        </tr>
                                        <tr>
                                            <td>Female</td>
                                            <td>68</td>
                                            <td>47.2</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
            
                    <!-- Right Column - EEG Features Visualization -->
                    <div class="col">
                        <div class="viz-container">
                            <div class="viz-title">EEG Measures & Associated Brain Regions</div>
                            <div class="viz-card">
                                <div class="eeg-composite-figure">
                                    <img src="images/brain_regions_combined.png" alt="EEG features and their brain locations" class="composite-image">
                                    <div class="figure-caption">
                                        <strong>Key EEG Features:</strong> 
                                        1) Frontal Gamma Power, 2) Connectivity Auditory Network, 
                                        3) Connectivity Language Network, 4) Connectivity Speech Network, 
                                        5) Spectral Power Lateralization
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Project Overview Section -->
            <section class="viz-section" id="methodology">
                <h2>How We Analyzed Brain Activity</h2>
                <div class="section-description">
                    Our approach to analyzing EEG patterns and tracking language development over time.
                </div>
                
                                <div class="viz-container" style="width: 100%;">                    <div class="viz-title">Project Methodology</div>
                    <div class="viz-card">
                        <img src="./images/Project Overview.png" alt="Project methodology overview" class="viz-image" style="width: 100%; height: auto; object-fit: contain; display: block; margin: 0 auto;">
                        <div class="viz-caption">
                            A) Data was collected from a cohort of 6-7 month-old infants (n=144), comprising 96 with elevated likelihood of autism spectrum disorder and 48 with typical development. B) EEG measures were extracted from key brain regions, primarily those associated with language processes. C) EEG features were pre-processed and analyzed to be used for stratification methods. D) Both hierarchical clustering and latent profile analysis was used to derived three distinct EEG subtypes. Above is a dendrogram showing the three subgroups identified. E) Results from the latent profile analysis and hierarchical clustering were analyzed for each group. Analyzes showed connectivity in the left hemisphere, lateralization of gamma power and connectivity in the auditory network to be important for deriving groups. F) Longitudinal language development trajectories (Mullen Scales of Early Learning scores) from 6 to 36 months across the three identified EEG subtypes.
                        </div>
                    </div>
                </div>
                
                <div class="overview-methods-grid">
                    <div class="overview-method-item">
                        <div class="method-icon">📊</div>
                        <h3>Latent Profile Analysis (LPA)</h3>
                        <p>A probabilistic approach that identifies latent groups based on multivariate normal distributions of observed variables. LPA was used to classify infants into distinct groups based on their EEG features.</p>
                    </div>
                    
                    <div class="overview-method-item">
                        <div class="method-icon">🧩</div>
                        <h3>Hierarchical Clustering (HC)</h3>
                        <p>A deterministic method that builds nested clusters by merging or splitting groups based on distance metrics. HC provided a complementary approach to confirm the group structure identified through LPA.</p>
                    </div>
                </div>
            </section>



            <!-- Key Findings Section (Keep only this version) -->
            <section class="viz-section" id="key-findings">
                <h2>What We Discovered</h2>
                <div class="section-description">
                    Three distinct brain activity patterns identified through multiple analytical approaches.
                </div>
                <div class="findings-container">
                    <div class="brain-group-card brain-group-a">
                        <h3><span class="group-indicator group-a-indicator">A</span>Group A Profile</h3>
                        <ul class="findings-list">
                            <li>High connectivity in left language areas</li>
                            <li>Leftward brain lateralization</li>
                            <li>Strongest language outcomes</li>
                        </ul>
                    </div>
                    <div class="brain-group-card brain-group-b">
                        <h3><span class="group-indicator group-b-indicator">B</span>Group B Profile</h3>
                        <ul class="findings-list">
                            <li>High connectivity in auditory network</li>
                            <li>No brain lateralization</li>
                            <li>Lower language scores</li>
                        </ul>
                    </div>
                    <div class="brain-group-card brain-group-c">
                        <h3><span class="group-indicator group-c-indicator">C</span>Group C Profile</h3>
                        <ul class="findings-list">
                            <li>Overall low connectivity</li>
                            <li>No brain lateralization</li>
                            <li>Intermediate outcomes</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- 3D Brain Model Section - Show all three models at once -->
            <section class="viz-section" id="brain-regions">
                <h2>Brain Regions of Interest</h2>
                <div class="section-description">
                    Interactive 3D visualizations of brain regions involved in language processing for each identified group.
                </div>
                
                <div class="brain-models-container">
                    <div class="brain-model-card">
                        <div class="viz-title">Group A Brain Connectivity</div>
                        <div class="viz-card">
                            <div class="brain-3d-container">
                                <iframe src="./images/3d_brain_regions_classA.html" 
                                        title="Group A Brain Regions"
                                        style="width:100%; height:100%; border:none;"
                                        allowfullscreen></iframe>
                            </div>
                            <div class="viz-caption">
                                High connectivity in left language areas with leftward lateralization.
                            </div>
                        </div>
                    </div>
                    
                    <div class="brain-model-card">
                        <div class="viz-title">Group B Brain Connectivity</div>
                        <div class="viz-card">
                            <div class="brain-3d-container">
                                <iframe src="./images/3d_brain_regions_classB.html"
                                        title="Group B Brain Regions"
                                        style="width:100%; height:100%; border:none;"
                                        allowfullscreen></iframe>
                            </div>
                            <div class="viz-caption">
                                High connectivity in the auditory network with no brain lateralization.
                            </div>
                        </div>
                    </div>
                    
                    <div class="brain-model-card">
                        <div class="viz-title">Group C Brain Connectivity</div>
                        <div class="viz-card">
                            <div class="brain-3d-container">
                                <iframe src="./images/3d_brain_regions_classC.html"
                                        title="Group C Brain Regions"
                                        style="width:100%; height:100%; border:none;"
                                        allowfullscreen></iframe>
                            </div>
                            <div class="viz-caption">
                                Overall low connectivity across networks with no brain lateralization.
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="viz-section" id="classes">
                <h2>The Three Brain Pattern Groups</h2>
                <div class="section-description">
                    Our analyses revealed three distinct groups using both Latent Profile Analysis <span class="tooltip-term" data-tooltip="A statistical method that identifies subgroups based on similar response patterns">?</span> and Hierarchical Clustering <span class="tooltip-term" data-tooltip="A technique that groups similar objects into clusters based on their characteristics">?</span> methods.
                </div>
                
                <!-- Tabs -->
                <div class="tabs">
                    <div class="tab" data-tab="sankey-view">Sankey Diagram</div>
                    <div class="tab active" data-tab="class-sizes-view">Class Sizes</div>
                </div>
                
                <!-- Sankey Diagram Content -->
                <div class="tab-content" id="sankey-view">
                    <div class="viz-container">
                        <div class="viz-title">Class Relationships</div>
                        <div class="viz-card" style="padding:0;">
                            <div class="iframe-container" style="padding-bottom:100%;">
                                <iframe src="images/sankey_diagram_2025_04_23.html" 
                                        title="Sankey Diagram"
                                        style="width:100%; height:100%; border:none;"></iframe>
                            </div>
                            <div class="viz-caption">
                                Flow diagram showing relationship between LPA (left) and HC (right) classes.
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Class Sizes Content -->
                <div class="tab-content active" id="class-sizes-view">
                    <div class="viz-container">
                        <div class="viz-title">Class Distribution</div>
                        <div class="viz-card">
                            <img src="images/LPA_HC_classes_size_2025_04_23.png" 
                                 alt="Class sizes visualization" 
                                 class="viz-image">
                            <div class="viz-caption">
                                Distribution of participants across identified classes.
                            </div>
                        </div>
                    </div>
                </div>
              
             </section>
            
             <section class="viz-section" id="distributions">
                <h2>Feature Distribution Analysis</h2>
                <div class="section-description">
                    Distribution of EEG features across the identified groups, showing how neurophysiological markers <span class="tooltip-term" data-tooltip="Measurable characteristics of brain activity that can be used to understand brain function">?</span> differ between groups.
                </div>
                
                <div class="tabs">
                    <div class="tab active" data-tab="eeg-distributions">EEG Distributions</div>
                    <div class="tab" data-tab="discriminative-power">Feature Discriminative Power</div>
                </div>
                
                <div class="tab-content active" id="eeg-distributions">
                                        <div class="viz-container" style="width: 100%;">                        <div class="viz-title">EEG Feature Distributions</div>
                        <div class="viz-card">
                                                        <img src="images/EEG_Measure_Long_Distributions_2025_04_23.png"                                  alt="Distribution plots for EEG features"                                  class="viz-image"                                 style="max-height: 1200px; width: 100%; object-fit: contain;">
                            <div class="viz-caption">
                                Distribution of each EEG measure across clusters, comparing LPA and HC classification approaches.
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="tab-content" id="discriminative-power">
                    <div class="viz-container">
                        <div class="viz-title">Feature Discriminative Power</div>
                        <div class="viz-card">
                            <img src="images/EEG_Class_Differentiation_Power.png" 
                                 alt="Feature discriminative power" 
                                 class="viz-image">
                            <div class="viz-caption">
                                F-statistics showing which EEG features most strongly differentiate between groups.
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <section class="viz-section" id="eeg-profiles">
                <h2>Brain Activity Profiles by Group</h2>
                <div class="section-description">
                    Visualization of EEG profiles for each identified group, showing patterns of neurophysiological functioning.
                </div>
                
                <!-- Interactive Group Comparison Controls -->
                <div class="group-comparison-controls">
                    <h3>Compare Groups:</h3>
                    <div class="comparison-buttons">
                        <button class="compare-groups-btn active" data-groups="all" data-metric="overall">All Groups</button>
                        <button class="compare-groups-btn" data-groups="A,B" data-metric="overall">Groups A vs B</button>
                        <button class="compare-groups-btn" data-groups="A,C" data-metric="overall">Groups A vs C</button>
                        <button class="compare-groups-btn" data-groups="B,C" data-metric="overall">Groups B vs C</button>
                    </div>
                </div>
                
                <div class="tabs">
                    <div class="tab active" data-tab="radar-plots">Radar Plots</div>
                    <div class="tab" data-tab="parallel-plots">Parallel Coordinates</div>
                    <div class="tab" data-tab="heatmap">Profile Heatmap</div>
                </div>
                
                <div class="tab-content active" id="radar-plots">
                    <div class="row">
                        <div class="col panel-container">
                            <div class="viz-container">
                                <div class="viz-title">LPA Group Profiles (Radar)</div>
                                <div class="viz-card">
                                    <img src="images/EEG_Profiles_LPA_Radar.png" alt="Radar plot of EEG profiles for LPA groups" class="viz-image">
                                    <div class="viz-caption">
                                        Radar plot showing normalized EEG profiles for LPA groups (A, B, C).
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col panel-container">
                            <div class="viz-container">
                                <div class="viz-title">HC Group Profiles (Radar)</div>
                                <div class="viz-card">
                                    <img src="images/EEG_Profiles_HC_Radar.png" alt="Radar plot of EEG profiles for HC groups" class="viz-image">
                                    <div class="viz-caption">
                                        Radar plot showing normalized EEG profiles for HC groups (a, b, c).
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="tab-content" id="parallel-plots">
                    <div class="row">
                        <div class="col">
                            <div class="viz-container">
                                <div class="viz-title">LPA Profiles (Parallel Coordinates)</div>
                                <div class="viz-card">
                                    <img src="images/EEG_Profiles_LPA_Parallel.png" alt="Parallel coordinate plot for LPA groups" class="viz-image">
                                    <div class="viz-caption">
                                        Parallel coordinate plot showing individual trajectories and means for LPA groups.
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col">
                            <div class="viz-container">
                                <div class="viz-title">HC Profiles (Parallel Coordinates)</div>
                                <div class="viz-card">
                                    <img src="images/EEG_Profiles_HC_Parallel.png" alt="Parallel coordinate plot for HC groups" class="viz-image">
                                    <div class="viz-caption">
                                        Parallel coordinate plot showing individual trajectories and means for HC groups.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="tab-content" id="heatmap">
                    <div class="viz-container">
                        <div class="viz-title">Combined Profile Heatmap</div>
                        <div class="viz-card">
                            <img src="images/EEG_Profiles_Combined_Heatmap.png" alt="Heatmap of EEG profiles across LPA and HC groups" class="viz-image">
                            <div class="viz-caption">
                                Heatmap with hierarchical clustering of EEG profiles across LPA and HC groups.
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <section class="viz-section" id="eeg-umap">
                <h2>Visual Mapping of Brain Patterns</h2>
                <div class="section-description">
                    Dimensionality reduction showing separation of groups in EEG feature space using UMAP <span class="tooltip-term" data-tooltip="Uniform Manifold Approximation and Projection: A technique that reduces high-dimensional data to 2D or 3D for easier visualization while preserving relationships">?</span>.
                </div>
                
                <div class="tabs">
                    <div class="tab" data-tab="umap3d">3D UMAP Projection</div>
                    <div class="tab active" data-tab="umap2d">2D UMAP Projection</div>
                </div>
                
                <div class="tab-content active" id="umap2d">
                    <div class="viz-container">
                        <div class="viz-title">2D UMAP Projection</div>
                        <div class="viz-card">
                            <img src="images/EEG_UMAP2D_Projection.png" alt="2D UMAP showing cluster separation" class="viz-image">
                            <div class="viz-caption">
                                2D UMAP projection showing how subjects cluster in the EEG feature space.
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="tab-content" id="umap3d">
                    <div class="viz-container">
                        <div class="viz-title">3D UMAP Projection (Interactive)</div>
                        <div class="chart-container" style="height:500px;">
                            <div class="iframe-container" style="padding-bottom:100%;"> <!-- Adjust this percentage as needed -->
                                <iframe src="images/EEG_UMAP_3D_Projection.html" title="3D UMAP Projection"
                                style="width:110%; height:100%; border:none;"></iframe>
                            </div>
                        </div>
                        <div class="viz-caption">
                            Interactive 3D UMAP showing EEG feature space colored by LPA and HC groups.
                        </div>
                    </div>
                </div>
            </section>
            <section class="viz-section" id="language-trajectories">
                <h2>How Language Develops Over Time</h2>
                <div class="section-description">
                    Longitudinal analysis of language development by group, showing how different EEG-based groups develop language abilities from 6 to 36 months.
                </div>
                
                <!-- Tabs -->
                <div class="tabs">
                    <div class="tab active" data-tab="trajectories-graph">Trajectories Graph</div>
                    <div class="tab" data-tab="expressive-model">Expressive Language Model</div>
                    <div class="tab" data-tab="receptive-model">Receptive Language Model</div>
                </div>
                
                <!-- Trajectories Graph Content -->
                                <div class="tab-content active" id="trajectories-graph">                    <div class="viz-container" style="width: 100%;">                        <div class="panel-container">
                            <div class="viz-title">Language Trajectories</div>
                            <div class="viz-card">
                                                                 <img src="images/language_trajectories_2025_04_23.png"                                      alt="Language trajectories by group"                                      class="viz-image"                                     style="max-height: 500px; width: 100%; object-fit: contain;">
                                <div class="viz-caption">
                                    Developmental trajectories of language skills across EEG groups over time.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Expressive Language Model Content -->
                                <div class="tab-content" id="expressive-model">                    <div class="viz-container" style="width: 100%;">                        <div class="panel-container">
                            <div class="viz-title">Expressive Language Model Results</div>
                            <div class="viz-card">
                                <div class="iframe-container" style="padding-bottom: 100%;">
                                    <iframe src="images/HC_Expressive_fixed_effects_table.html" 
                                            title="Expressive Language Model Results"
                                            style="width: 100%; height: 100%; border: none;"></iframe>
                                </div>
                                <div class="viz-caption">
                                    Fixed effects table for the expressive language linear model.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Receptive Language Model Content -->
                                <div class="tab-content" id="receptive-model">                    <div class="viz-container" style="width: 100%;">                        <div class="panel-container">
                            <div class="viz-title">Receptive Language Model Results</div>
                            <div class="viz-card">
                                <div class="iframe-container" style="padding-bottom: 100%;">
                                    <iframe src="images/LPA_Receptive_fixed_effects_table.html" 
                                            title="Receptive Language Model Results"
                                            style="width: 100%; height: 100%; border: none;"></iframe>
                                </div>
                                <div class="viz-caption">
                                    Fixed effects table for the receptive language linear model.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <section class="viz-section" id="lang-36months">
                <h2>Language Abilities at 3 Years</h2>
                <div class="section-description">
                    Analysis of language abilities at 36 months, showing differences in outcomes between EEG-based groups.
                </div>
                
                <div class="viz-container" style="width: 100%;">
                    <div class="viz-title">Language Scores at 36 Months</div>
                    <div class="viz-card">
                        <img src="images/language_analysis_36months_2025_04_23.png" alt="Boxplots of language scores at 36 months by group" class="viz-image">
                        <div class="viz-caption">
                            Boxplots comparing expressive and receptive language scores at 36 months by group, with statistical significance annotations.
                        </div>
                    </div>
                </div>
                
                <div class="key-finding">
                    <h4>Key Finding</h4>
                    <p>Groups identified through EEG profiles show statistically significant differences in language outcomes at 36 months, with Group A/a showing the most favorable outcomes.</p>
                </div>
            </section>

            <!-- Important Insights Section - Converted from accordion to bullets -->
            <section class="viz-section" id="important-insights">
                <h2>Key Insights & Implications</h2>
                <div class="section-description">
                    Important discoveries about early neural markers and their implications for language development.
                </div>

                <div class="insights-container">
                    <div class="insight-item">
                        <h3>Early Predictive Power</h3>
                        <p>Brain patterns at 6 months can predict language development trajectories, suggesting early intervention possibilities.</p>
                    </div>

                    <div class="insight-item">
                        <h3>Autism Independence</h3>
                        <p>No differences in autism diagnosis across groups, indicating these brain patterns reflect general language development mechanisms rather than autism-specific traits.</p>
                    </div>

                    <div class="insight-item">
                        <h3>Left-Hemisphere Advantage</h3>
                        <p>Left-hemisphere bias in brain activity during infancy appears beneficial for language development, consistent with previous research.</p>
                    </div>

                    <div class="insight-item">
                        <h3>Gender Differences</h3>
                        <p>Males showed lower receptive language scores across groups, suggesting potential gender-specific developmental patterns.</p>
                    </div>

                    <div class="insight-item">
                        <h3>Nonverbal IQ Impact</h3>
                        <p>Nonverbal cognitive abilities at 6 months strongly predicted later language skills, highlighting the interconnected nature of cognitive development.</p>
                    </div>
                </div>
            </section>

            <!-- Brain-Behavior Relationships Section - Redesigned -->
            <section class="viz-section" id="brain-behavior">
                <h2>Connecting Brain Patterns to Language Skills</h2>
                <div class="section-description">
                    Understanding the connection between early neural markers and language development.
                </div>

                <div class="brain-behavior-grid">
                    <div class="brain-behavior-item">
                        <div class="behavior-icon">🧠</div>
                        <h3>Neural Substrates</h3>
                        <p>The neural foundations for language development are present from early infancy, with the speech network and left-hemisphere lateralization playing crucial roles.</p>
                    </div>
                    
                    <div class="brain-behavior-item">
                        <div class="behavior-icon">📊</div>
                        <h3>Stratification Approach</h3>
                        <p>Multivariate stratification approaches prove valuable in understanding developmental heterogeneity and may guide personalized interventions.</p>
                    </div>
                    
                    <div class="brain-behavior-item">
                        <div class="behavior-icon">🔬</div>
                        <h3>Research Impact</h3>
                        <p>This research demonstrates the potential of using early brain measures to predict language development trajectories, contributing to evidence that brain-based stratification approaches can help decode developmental heterogeneity and guide personalized early interventions.</p>
                    </div>
                </div>
            </section>

            <footer>
                <div class="footer-content">
                    <p>Early Neural and Behavioral Markers of Language Development in Infancy</p>
                    <p>A comprehensive study of EEG measures and language development in infants</p>
                    <p class="copyright">© 2024 All Rights Reserved</p>
                </div>
            </footer>
        </main>
    </div>
    
    <div id="lightbox">
        <span class="close-lightbox">&times;</span>
        <img id="lightbox-image" src="" alt="Enlarged visualization">
    </div>
    
    <script>
        // Plotly-specific auto-rotation for brain models has been removed as it wasn't working

        // Toggle sidebar
        const sidebarToggle = document.getElementById('sidebarToggle');
        const sidebar = document.querySelector('.sidebar');
        const mainContent = document.querySelector('.main-content');
        
        sidebarToggle.addEventListener('click', function() {
            sidebar.classList.toggle('sidebar-collapsed');
            mainContent.classList.toggle('expanded');
        });
        
        // Tab functionality
        const tabs = document.querySelectorAll('.tab');
        tabs.forEach(tab => {
            tab.addEventListener('click', function() {
                const tabId = this.getAttribute('data-tab');
                const tabContent = document.getElementById(tabId);
                const tabContainer = this.closest('.tabs').parentElement;
                
                // Remove active class from all tabs
                this.parentElement.querySelectorAll('.tab').forEach(t => {
                    t.classList.remove('active');
                });
                
                // Remove active class from all tab contents
                tabContainer.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.remove('active');
                });
                
                // Add active class to clicked tab and its content
                this.classList.add('active');
                tabContent.classList.add('active');
            });
        });
        
        // Group comparison functionality
        const compareButtons = document.querySelectorAll('.compare-groups-btn');
        
        compareButtons.forEach(button => {
            button.addEventListener('click', function() {
                // Update active state
                compareButtons.forEach(btn => btn.classList.remove('active'));
                this.classList.add('active');
                
                const groupsToCompare = this.dataset.groups;
                const metricType = this.dataset.metric;
                
                // Filter the visualizations based on the selected comparison
                // In a real implementation, we would have different images or data for each comparison
                // For now, we'll just log the selection and could enhance with actual data later
                console.log(`Comparing groups: ${groupsToCompare}, Metric: ${metricType}`);
                
                // Example of how you could show different visualizations based on selection:
                if (groupsToCompare === 'all') {
                    // Show the default visualization with all groups
                    document.querySelectorAll('.comparison-specific').forEach(el => {
                        el.style.display = 'none';
                    });
                    document.querySelectorAll('.all-groups').forEach(el => {
                        el.style.display = 'block';
                    });
                } else {
                    // In a full implementation, you would have specific visualizations for each comparison
                    // For now, we just demonstrate the interaction pattern
                    document.querySelectorAll('.all-groups').forEach(el => {
                        el.style.display = 'none';
                    });
                    
                    // Show a message about the selected comparison
                    // In reality, you would show the appropriate visualization
                    const comparisonMessage = `Showing comparison for groups: ${groupsToCompare}`;
                    alert(comparisonMessage);
                }
            });
        });
        
        // Complexity toggle functionality
        const complexityBtns = document.querySelectorAll('.complexity-btn');
        
        complexityBtns.forEach(button => {
            button.addEventListener('click', function() {
                // Update active state
                complexityBtns.forEach(btn => btn.classList.remove('active'));
                this.classList.add('active');
                
                const audienceLevel = this.dataset.level;
                
                // Toggle technical content visibility
                if (audienceLevel === 'general') {
                    // Hide technical content
                    document.querySelectorAll('.technical-content').forEach(el => {
                        el.style.display = 'none';
                    });
                    document.querySelectorAll('.general-content').forEach(el => {
                        el.style.display = 'block';
                    });
                    
                    // Hide technical tooltips
                    document.querySelectorAll('.tooltip-term').forEach(el => {
                        el.style.display = 'inline-block';
                    });
                } else {
                    // Show technical content
                    document.querySelectorAll('.technical-content').forEach(el => {
                        el.style.display = 'block';
                    });
                    document.querySelectorAll('.general-content').forEach(el => {
                        el.style.display = 'none';
                    });
                    
                    // Hide tooltips as they're not needed for researchers
                    document.querySelectorAll('.tooltip-term').forEach(el => {
                        el.style.display = 'none';
                    });
                }
            });
        });
        
        // Dark mode toggle
        const toggleTheme = document.querySelector('.toggle-theme');
        toggleTheme.addEventListener('click', function() {
            document.body.classList.toggle('dark-mode');
            
            // Save preference to local storage
            if (document.body.classList.contains('dark-mode')) {
                localStorage.setItem('darkMode', 'enabled');
            } else {
                localStorage.setItem('darkMode', 'disabled');
            }
        });
        
        // Check for saved dark mode preference
        if (localStorage.getItem('darkMode') === 'enabled') {
            document.body.classList.add('dark-mode');
        }
        
        // Lightbox functionality
        const vizImages = document.querySelectorAll('.viz-image');
        const lightbox = document.getElementById('lightbox');
        const lightboxImage = document.getElementById('lightbox-image');
        const closeLightbox = document.querySelector('.close-lightbox');
        
        vizImages.forEach(img => {
            img.addEventListener('click', function() {
                lightboxImage.src = this.src;
                lightbox.style.display = 'flex';
            });
        });
        
        closeLightbox.addEventListener('click', function() {
            lightbox.style.display = 'none';
        });
        
        lightbox.addEventListener('click', function(e) {
            if (e.target === lightbox) {
                lightbox.style.display = 'none';
            }
        });
        
        // Navigation highlighting
        const navLinks = document.querySelectorAll('.nav-links a');
        navLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                
                // Remove active class from all links
                navLinks.forEach(l => l.classList.remove('active'));
                
                // Add active class to clicked link
                this.classList.add('active');
                
                // Scroll to section
                const targetId = this.getAttribute('href').substring(1);
                const targetSection = document.getElementById(targetId);
                targetSection.scrollIntoView({ behavior: 'smooth' });
                
                // Close sidebar on mobile
                if (window.innerWidth <= 1024) {
                    sidebar.classList.add('sidebar-collapsed');
                    mainContent.classList.add('expanded');
                }
            });
        });
        
        // Responsive adjustments
        function checkWidth() {
            if (window.innerWidth <= 1024) {
                sidebar.classList.add('sidebar-collapsed');
                mainContent.classList.add('expanded');
                sidebarToggle.classList.add('visible');
            } else {
                sidebar.classList.remove('sidebar-collapsed');
                mainContent.classList.remove('expanded');
                sidebarToggle.classList.remove('visible');
            }
        }
        
        window.addEventListener('load', checkWidth);
        window.addEventListener('resize', checkWidth);
        
        // Accordion functionality
        const accordionHeaders = document.querySelectorAll('.accordion-header');
        accordionHeaders.forEach(header => {
            header.addEventListener('click', function() {
                const accordionItem = this.parentElement;
                const content = accordionItem.querySelector('.accordion-content');
                
                // Close all other accordion items
                document.querySelectorAll('.accordion-item').forEach(item => {
                    if (item !== accordionItem) {
                        item.classList.remove('accordion-active');
                        item.querySelector('.accordion-content').style.maxHeight = '0';
                    }
                });
                
                // Toggle current accordion item
                accordionItem.classList.toggle('accordion-active');
                if (accordionItem.classList.contains('accordion-active')) {
                    content.style.maxHeight = content.scrollHeight + 'px';
                } else {
                    content.style.maxHeight = '0';
                }
            });
        });

        // Dropdown functionality for sidebar
        const dropdownToggles = document.querySelectorAll('.dropdown-toggle');
        dropdownToggles.forEach(toggle => {
            toggle.addEventListener('click', function() {
                this.classList.toggle('active');
                const dropdownContent = this.nextElementSibling;
                dropdownContent.classList.toggle('active');
                
                // Update dropdown icon
                const icon = this.querySelector('.dropdown-icon');
                if (dropdownContent.classList.contains('active')) {
                    icon.textContent = '▼';
                } else {
                    icon.textContent = '►';
                }
            });
        });
        
        // Expand dropdown if it contains active link
        function checkActiveDropdowns() {
            const activeLink = document.querySelector('.nav-links a.active');
            if (activeLink) {
                const parentDropdown = activeLink.closest('.dropdown-content');
                if (parentDropdown) {
                    parentDropdown.classList.add('active');
                    const parentToggle = parentDropdown.previousElementSibling;
                    parentToggle.classList.add('active');
                    parentToggle.querySelector('.dropdown-icon').textContent = '▼';
                }
            }
        }
        
        window.addEventListener('load', checkActiveDropdowns);
    </script>
</body>
</html>

